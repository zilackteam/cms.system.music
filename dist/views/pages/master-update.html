<p><a ui-sref="master">Back to Masters</a></p>

<div layout="column" layout-gt-xs="row">
    <form name="updateMaster" flex layout="row" layout-wrap autocomplete="off" role="presentation">
        <h2 class="sub-heading">Update Information</h2>
        <error-block messages="errorMsgs" flex="100"></error-block>

        <md-input-container flex="50" flex-xs="100">
            <label>Secname</label>
            <input type="text" ng-model="master.sec_name" autocomplete="off"/>
        </md-input-container>
        <md-input-container flex="50" flex-xs="100">
            <label>Secpass</label>
            <input type="password" ng-model="master.sec_pass" autocomplete="off"/>
        </md-input-container>
        <md-input-container flex="50" flex-xs="100">
            <label>Name</label>
            <input type="text" ng-model="master.name"/>
        </md-input-container>

        <md-input-container flex="50" flex-xs="100">
            <label>Application</label>
            <md-select ng-model="master.content_id" placeholder="Application">
                <md-option ng-repeat="app in apps" ng-value="app.content_id" >{{ app.name }}</md-option>
            </md-select>
        </md-input-container>

        <md-input-container flex="50" flex-xs="100">
            <label>DOB</label>
            <input type="text" pick-a-date="master.dob"/>
        </md-input-container>

        <md-input-container flex="50" flex-xs="100">
            <label>Short info</label>
            <textarea type="text" ng-model="master.short_info"/>
        </md-input-container>

        <md-input-container flex="50" flex-xs="100">
            <label>Detail info</label>
            <textarea type="text" ng-model="master.detail_info"/>
        </md-input-container>

        <div flex="100" class="align-center actions">
            <md-button class="md-raised md-primary" ng-click="doUpdate()">
                Submit
            </md-button>
        </div>
    </form>
    <form name="updateAvatar" flex flex-offset-gt-xs="5" class="upload-avatar">
        <h2 class="sub-heading">Avatar</h2>

        <p>Select your avatar</p>
        <div class="upload-selector" ngf-select ng-model="avatar" name="avatar"
             ngf-pattern="'image/*'" ngf-accept="'image/*'" ngf-max-size="3MB"
        >
            <img ngf-thumbnail="avatar" class="thumb">
            <img src="{{master.avatar}}" ng-hide="avatar" class="thumb">
        </div>
        <md-progress-linear md-mode="determinate" value="{{avatar.progress}}"></md-progress-linear>

        <div class="upload-actions" layout="row">
            <md-button class="md-raised md-warn" ng-click="clearUpload()" ng-show="avatar && !avatar.uploaded" style="margin-right:5px;">Remove</md-button>
            <md-button class="md-raised md-primary" ng-click="uploadAvatar(avatar)" ng-disabled="!avatar || avatar.uploaded">Upload</md-button>
        </div>
    </form>
</div>